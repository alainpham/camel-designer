<!DOCTYPE html>
<html>
  <head>

    <meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy" content="default-src vscode-resource: https: 'unsafe-eval'; img-src data: vscode-resource: https: 'unsafe-eval'; script-src vscode-resource: https: 'unsafe-eval' 'unsafe-inline'; style-src vscode-resource: https: 'unsafe-inline';"/>

    <!-- external style for buttons interface -->
    <link rel="stylesheet" type="text/css" href="${srcPathScheme}/src/webview/css/interface.css">

    <!-- local scripts -->
    <script src="${srcPathScheme}/src/webview/js/helper-blocks.js"></script>
    <script src="${srcPathScheme}/src/webview/js/helper-code.js"></script>
    <script src="${srcPathScheme}/src/webview/js/helper-rest.js"></script>
    <script src="${srcPathScheme}/src/webview/js/helper.js"></script>

    <!-- experimental -->
    <script src="${srcPathScheme}/src/webview/js/incubator.js"></script>

    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
    <!-- <script src="https://unpkg.com/aframe-outline@%5E1.1.0/build/aframe-outline.min.js"></script> -->
    <script src="${srcPathScheme}/node_modules/aframe/dist/aframe-v1.0.4.min.js"></script>

    <!-- Fonts to work with off-line -->
    <script>
      var fontRoboto        = "${srcPathScheme}/src/webview/fonts/Roboto-msdf.json";
      var fontSourceCodePro = "${srcPathScheme}/src/webview/fonts/SourceCodePro.fnt";
    </script>

    <script src="${srcPathScheme}/src/webview/js/index.js"></script>

    <script>
      //we keep a reference to vscode
      const vscode = acquireVsCodeApi();
    </script>

  </head>


  <body onload="init()">

      <!-- This is the list of activities -->
      <routenav class="prev"><button class="button" onclick="nextRoute()">&lt;</button></routenav>
      <routenav class="current">Route Name</routenav>
      <routenav class="next"><button class="button" onclick="nextRoute()">&gt;</button></routenav>
      <routenav class="new"><button class="button" onclick="newRoute()" style="font-size:16px" >New<br/>route</button></routenav>
      <!-- <routenav class="export"><button class="button" onclick="getCamelSource()">Export</button></routenav> -->
      <!-- <routenav class="import"><button class="button" onclick="importSource()">Import</button></routenav> -->

      <!-- These are dedicated to Web Services -->
      <routenav class="bRest"><button class="button" onclick="viewRestDefinitions()">REST</button></routenav>
      <!-- <routenav class="soap"><button class="button" onclick="//pending">SOAP</button></routenav> -->

  <!-- Experimental -->
  <!-- <routenav class="soap"><button class="button" onclick="takeScreenshot()">SOAP</button></routenav>
  <p class="activityconfig" id="screenshot" style="visibility: visible;"><br/>
  </p> -->


      <!-- Categories -->
      <p class="producer">from</p>
      <p class="setter">set</p>
      <p class="consumer">to</p>
      <p class="rest">rest</p>

      <!-- Camel Components & composites -->
      <p class="producer timer"><button class="button"  onclick="createTimer()">timer</button></p>
      <p class="producer direct-s"><button class="button"  onclick="createDirectStart()">direct</button></p>
 
        <!-- SETTERs -->
        <p class="setter prop"><button style="font-size:20px;" class="button" disabled onclick="createProperty()">property</button></p>
        <p class="setter header"><button class="button" disabled onclick="createHeader()">header</button></p>
        <p class="setter body"><button class="button" disabled onclick="createBody()">body</button></p>

          <!-- TO -->
          <p class="consumer log"><button class="button" disabled onclick="createLog()">log</button></p>
          <p class="consumer direct"><button style="font-size:16px" class="button" disabled onclick="createDirect()">call to</br>direct</button></p>
          <p class="consumer choice"><button class="button" disabled onclick="createChoice()">choice</button></p>
          <p class="consumer multicast"><button class="button" disabled onclick="createMulticast()">fork</button></p>
          
            <!-- REST -->
            <p class="rest group"><button class="button" disabled onclick="createRestGroup()">group</button></p>
            <p class="rest get"><button class="button" disabled onclick="createRestMethod({method: 'get'})">GET</button></p>
            <p class="rest post"><button class="button" disabled onclick="createRestMethod({method: 'post'})">POST</button></p>
            <p class="rest put"><button class="button" disabled onclick="createRestMethod({method: 'put'})">PUT</button></p>


      <!-- Configuration Panel -->
      <p class="activityconfig" id="introconfig" style="visibility: visible;"><br/>
        <font size="6">Configuration Pane</font>
      </p>

      <p class="activityconfig" id="loginput"><br/>
        <label>Log message:</label><br/>
        <input type="text" size="50" oninput="submitLogConfig();syncEditor();">
         <!--placeholder for expression variables-->
        <vars></vars>
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </p>

      <p class="activityconfig" id="newDirect"><br/>
        <label>direct call to:</label>
        <select onchange="updateConfigDirect(this.value)">
        </select>
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
        <br/><br/>
        <label id="hint-direct-config">To configure the call, ensure a Route exists with a 'Direct' starting activity. Then select the target route to call from the drop down list.</label>
      </p>

      <p class="activityconfig" id="config-choice-when"><br/>
        <label>expression language:</label>
        <select>
          <option>simple</option>
          <option>constant</option>
        </select>
        <br/>
        <input type="text" size="50" oninput="submitConfigChoice();syncEditor();">
      </p>

      <p class="activityconfig" id="name-value-pair"><br/>
        <label>Name:</label></br>
        <input type="text" size="50" oninput="submitConfigNameValuePair();syncEditor();"></br>
        </br>
        <label>expression language:</label>
        <select>
          <option>simple</option>
          <option>constant</option>
        </select>
        <br/>
        <input type="text" size="50" oninput="submitConfigNameValuePair();syncEditor();">
         <!--placeholder for expression variables-->
        <vars></vars>
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </p>

      <p class="activityconfig" id="set-body"><br/>
        <label>expression language:</label>
        <select>
          <option>simple</option>
          <option>constant</option>
        </select>
        <br/>
        <input type="text" size="50" oninput="submitConfigBody();syncEditor();">
         <!--placeholder for expression variables-->
        <vars>
          <select id="select-vars" onchange="useExpressionVariable(this)">
            <option>use variable...</option>
          </select>
        </vars>
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </p>

      <p class="activityconfig" id="config-rest-group"><br/>
        <label>Path:</label>
        <label for="input-path">/</label>
        <input type="text" size="50" oninput="submitRestGroupConfig();syncEditor();" id="input-path">
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </p>

      <p class="activityconfig" id="config-rest-method"><br/>
        <label>uri:</label>
        <label for="input-uri">/</label>
        <input type="text" size="50" oninput="submitRestMethodConfig();syncEditor();" id="input-uri">
        <button class="delete" type="submit" onclick="deleteConfigActivity()">delete</button>
      </p>


    <!-- Spacial scene (A-Frame elements) -->
    <a-scene myoutline cursor="rayOrigin:mouse" raycaster="objects: .clickable, .testcollidable" vr-mode-ui="enabled: false">

      <a-assets>
        <img id="routeThumbnail" crossorigin="anonymous" src="${srcPathScheme}/src/media/routes-ring.jpg">
        <img id="camel-icon" crossorigin="anonymous" src="${srcPathScheme}/src/media/camel-origami2.png">
      </a-assets>

      <a-entity>
        <a-camera id="main-camera" look-controls-enabled="false">
          <a-text value="Prototype\nunder construction" align="center" scale="20 20 20" color="yellow" opacity=".3" position="5 13 -27" side="double" font="${srcPathScheme}/src/webview/fonts/Roboto-msdf.json"></a-text>
          
          <a-sphere id="designer-icon" position="17 15 -27" scale="4 4 4" material="" radius="0.5" opacity=".2" transparent="true" color="#52F40C"><a-ring side="double" material="" src="#camel-icon" radius-inner="0.00001" geometry="" radius-outer="0.46"></a-ring></a-sphere> 
        </a-camera>
      </a-entity>

      <!-- Entity to accommodate route definitions -->
      <a-entity id="route-definitions">
        <a-entity id="route1" route="" class="clickable" position="0 0 0">
        </a-entity>
      </a-entity>

      <!-- Entity to accommodate REST definitions -->
      <a-entity id="rest-definitions" class="clickable" position="0 100 0">
      </a-entity>

      <a-sky color="black"></a-sky>

	  </a-scene>

  </body>
</html>
